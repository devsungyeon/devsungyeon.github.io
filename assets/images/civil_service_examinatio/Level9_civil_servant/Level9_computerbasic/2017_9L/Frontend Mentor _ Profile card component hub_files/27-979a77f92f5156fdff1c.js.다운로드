(window.cbJsonP=window.cbJsonP||[]).push([[27],{260:function(t,e,n){"use strict";n.r(e);var i=n(3),a=n.n(i),s=n(11),o=n.n(s),r=n(36),u=n.n(r),c=n(12),h=n.n(c),l=n(2),p=n.n(l),f=n(4),v=n.n(f),d=(n(22),n(23)),g=[{name:"portal",actions:[{name:"logout",method:"post",endpoint:"/api/internal/ssp_users/logout",headers:{"X-Requested-With":"XMLHttpRequest"}}]},{name:"js_info",actions:[{name:"retrieve",method:"get",headers:{"X-Requested-With":"XMLHttpRequest"},endpoint:function(){return"/api/internal/"+Object(d.c)()+"/retrieve_js_info"},static:!0}]},{name:"locale",actions:[{name:"retrieve",method:"get",headers:{"X-Requested-With":"XMLHttpRequest"},endpoint:function(t){return"/api/internal/cbjs/"+Object(d.c)()+"/translations?locale="+t.languageCode},static:!0}]}],m=n(15),b=n(105),j=n(19),y=(v()(C,[{key:"init",value:function(){return this.apiClient.addApis(g),this.hpData={},this.getInfo()}},{key:"getInfo",value:function(){var e=this;return this.info?h.a.resolve(this.info):this.apiClient.js_info.retrieve().then(function(t){return e.info=t}).catch(function(t){return e.info={site:e.config.site},h.a.resolve(e.info)})}},{key:"syncTranslations",value:function(t){Object(j.i)(t)}},{key:"getTranslations",value:function(t){var e=this,n=0<arguments.length&&void 0!==t?t:{},i=Object(j.h)(n.locale),a=n.languageCode,s=Object(j.e)();return i?s[i]?h.a.resolve(s[i]):this.apiClient.locale.retrieve({languageCode:a}).then(function(t){return e.syncTranslations(t),t}).catch(function(t){var e=new m.a(t);throw b.a.error(e),e}):h.a.resolve(s)}},{key:"getHpData",value:function(t){return t&&u()(this.hpData[t])?o()({},t,this.hpData[t]):t?{}:this.hpData}},{key:"portalLogout",value:function(){var t=this;return this.hpData.jwt?this.apiClient.portal.logout({},{token:this.hpData.jwt}).then(function(){return{success:!(t.hpData.jwt="")}}):h.a.resolve({success:!1})}},{key:"setHpData",value:function(e){var n=this;return a()(e).map(function(t){u()(e[t])&&(n.hpData[t]=e[t])}),h.a.resolve({acknowledged:!0})}}]),C);function C(t){p()(this,C),this.config={site:t.site,hostname:t.hostName,publishableKey:t.publishableKey},this.apiClient=t.apiClient,this.iframeClient=t.connectionClient,this.commMgr=t}e.default=y}}]);
//# sourceMappingURL=27-979a77f92f5156fdff1c.js.map